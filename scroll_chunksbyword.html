<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kei - Scroll Triggered Word-by-Word Reveal</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            height: 300vh;
        }
        .reveal-text {
            max-width: 800px;
            margin: 0 0;
            position: fixed;
            top: 50px;
            left: 20px;
            right: 220px;
        }
        .reveal-text span {
            opacity: 0;
            transition: opacity 0.05s ease-out;
        }
        .control-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 180px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .control-panel label {
            display: block;
            margin-top: 10px;
        }
        .control-panel input {
            width: 100%;
        }
        .control-panel .value {
            display: inline-block;
            width: 30px;
            text-align: right;
        }
        .reveal-text>div{
	        margin-bottom:30px;
        }
        
        .scribbleable{
	       
	        text-decoration: none;
        }
         .scribbled{
	       
	        text-decoration: line-through;
        }
    </style>
</head>
<body>
	<div style="position: fixed;">hello world</div>
    <div class="reveal-text">
        <div>Kei helps organizations unlock actionable insights<span class="scribbleable">, gain competitive edges, seize untapped opportunities, predict future demand, and essentially just figure out what exactly is going on in the world and what can be done about it.</span></div>
        <div>Kei helps organizations discover patterns<span class="scribbleable">, identify the most effective areas of action, drive transformative impact through cutting-edge strategy and innovative business design solutions, and did we already mention strategy and solutions and innovative and impact and transformative...?</span></div>
        <div>Kei helps organizations discover patterns<span class="scribbleable">, find focus, ideate, innovate, strategize, execute, conceptualize, optimize, synergize, disrupt, leverage, streamline, gamify, futureproof, blockchain-ify, growth-hack, paradigm-shift, thought-lead, cross-pollinate, mindshare-maximize, holisti-harmonize, quantum-leap, neuro-program, AI-ify, uber-ize, crypto-revolutionize, hyper-personalize, omni-orchestrate, meta-versify, cyber-synthesize, quantum-entangle, hyper-loop, singularity-approach, dark-disrupt, biohack, neuro-enhance, quantum-compute, hologram-project, time-warp, teleport, inter-brainstorm, gravity-defy, wormhole-traverse, multiverse-expand, antimatter-fuel, galactic-innovate, supernova-explode, black-hole-compress, cosmic-ray-infuse, parallel-pivot, big-bangify...</span></div>
		<div>Kei helps organizations discover patterns<span class="scribbleable">, find focus, create experiences, and leverage brand synergies, amplify value propositions, drive stakeholder engagement, and nurture brand evangelists through immersive, omni-channel storytelling experiences that quantum-entangle consumer neurons, hyper-loop customer journeys through the metaverse, crypto-revolutionize brand loyalty with NFT-powered empathy tokens, and hologram-project value bombs directly into the limbic systems of target demographics while AI-powered narrative swarms colonize social media mindshare, blockchain-ifying every touchpoint into a singularity of brand love that transcends space-time, disrupts industry paradigms with antimatter-fueled innovation, and telepathically implants USPs into the collective unconscious of the global market, resulting in a supernova of viral engagement that black-hole-compresses sales funnels into instantaneous conversion events...</span></div>
        <div>Kei helps organizations to discover patterns, find focus, create experiences, and inspire audiences.</div>
    </div>

    <div class="control-panel">
        <label for="typingSpeed">Typing Speed: <span id="typingSpeedValue" class="value">4</span>ms</label>
        <input type="range" id="typingSpeed" min="0" max="100" value="4">
        
        <label for="erasingSpeed">Erasing Speed: <span id="erasingSpeedValue" class="value">2</span>ms</label>
        <input type="range" id="erasingSpeed" min="0" max="100" value="2">
        
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Select the main text container and its paragraphs
    const text = document.querySelector('.reveal-text');
    const paragraphs = text.getElementsByTagName('div');
    let html = '';
    
    // Function to wrap words in spans
    function wrapWordsInSpans(text) {
        return text.split(/\s+/).map(word => 
            `<span style="opacity: 0;">${word}</span>`
        ).join(' ');
    }
    
    // Process each paragraph
    Array.from(paragraphs).forEach(paragraph => {
        let paragraphHtml = '<div>';
        
        // Process the content of the paragraph
        const childNodes = Array.from(paragraph.childNodes);
        childNodes.forEach(node => {
            if (node.nodeType === Node.TEXT_NODE) {
                // Regular text
                paragraphHtml += wrapWordsInSpans(node.textContent);
            } else if (node.nodeType === Node.ELEMENT_NODE) {
                if (node.classList.contains('scribbleable')) {
                    // Scribbleable text
                    paragraphHtml += `<span class="scribbleable">${wrapWordsInSpans(node.textContent)}</span>`;
                } else {
                    // Other elements, preserve them and wrap their text content
                    paragraphHtml += `<${node.tagName.toLowerCase()}>${wrapWordsInSpans(node.textContent)}</${node.tagName.toLowerCase()}>`;
                }
            }
        });
        paragraphHtml += '</div>';
        html += paragraphHtml;
    });
    
    // Replace the original text with the new HTML containing spans
    text.innerHTML = html;

    // Variables to keep track of current position and state
    let currentParagraph = 0;  // Start at the first paragraph
    let currentWord = 0;
    let isAnimating = false;
    let scrollDirection = 0; // 1 for down, -1 for up, 0 for no scroll

    // Speed variables (in milliseconds)
    let typingSpeed = 4;
    let erasingSpeed = 2;

    // Disable default scrolling
    document.body.style.overflow = 'hidden';

    // Function to animate words (reveal or hide)
    function animateWords(reveal) {
        const paragraphWords = Array.from(paragraphs[currentParagraph].querySelectorAll('span'));
        if (reveal) {
            if (currentWord < paragraphWords.length) {
                paragraphWords[currentWord].style.opacity = '1';
                currentWord++;
            }
        } else {
            if (currentWord > 0) {
                currentWord--;
                paragraphWords[currentWord].style.opacity = '0';
            }
        }
    }

    // Function to replace scribbleable with scribbled
    function replaceScribbleableWithScribbled() {
        const scribbleableElements = paragraphs[currentParagraph].querySelectorAll('.scribbleable');
        scribbleableElements.forEach(element => {
            element.classList.remove('scribbleable');
            element.classList.add('scribbled');
        });
    }

    // Function to start the animation
    function startAnimation(reveal) {
        if (!isAnimating) {
            isAnimating = true;
            const speed = reveal ? typingSpeed : erasingSpeed;
            const interval = setInterval(() => {
                animateWords(reveal);
                if ((reveal && currentWord === paragraphs[currentParagraph].querySelectorAll('span').length) ||
                    (!reveal && currentWord === 0)) {
                    clearInterval(interval);
                    isAnimating = false;
                    if (reveal) {
                        replaceScribbleableWithScribbled();
                    }
                }
            }, speed);
        }
    }

    // Function to handle scrolling
    function handleScroll(delta) {
        scrollDirection = Math.sign(delta);

        if (!isAnimating) {
            if (scrollDirection > 0 && currentParagraph < paragraphs.length - 1) {
                currentParagraph++;
                currentWord = 0;
                startAnimation(true);
            } else if (scrollDirection < 0 && currentParagraph >= 0) {
                if (currentWord === 0 && currentParagraph > 0) {
                    currentParagraph--;
                    currentWord = paragraphs[currentParagraph].querySelectorAll('span').length;
                }
                // Revert scribbled back to scribbleable
                const scribbledElements = paragraphs[currentParagraph].querySelectorAll('.scribbled');
                scribbledElements.forEach(element => {
                    element.classList.remove('scribbled');
                    element.classList.add('scribbleable');
                });
                startAnimation(false);
            }
        }
    }

    // Debounce function to limit scroll event frequency
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }

    // Handle wheel events for custom scrolling
    window.addEventListener('wheel', debounce((e) => {
        e.preventDefault();
        handleScroll(e.deltaY);
    }, 50), { passive: false });

    // Handle keydown events for custom scrolling
    window.addEventListener('keydown', (e) => {
        switch(e.key) {
            case 'ArrowDown':
            case 'PageDown':
                e.preventDefault();
                handleScroll(1);
                break;
            case 'ArrowUp':
            case 'PageUp':
                e.preventDefault();
                handleScroll(-1);
                break;
        }
    });

    // Control panel functionality
    const typingSpeedSlider = document.getElementById('typingSpeed');
    const erasingSpeedSlider = document.getElementById('erasingSpeed');
    const typingSpeedValue = document.getElementById('typingSpeedValue');
    const erasingSpeedValue = document.getElementById('erasingSpeedValue');

    // Event listener for typing speed slider
    typingSpeedSlider.addEventListener('input', function() {
        typingSpeed = parseInt(this.value);
        typingSpeedValue.textContent = this.value;
    });

    // Event listener for erasing speed slider
    erasingSpeedSlider.addEventListener('input', function() {
        erasingSpeed = parseInt(this.value);
        erasingSpeedValue.textContent = this.value;
    });

    // Start animating the first paragraph
    startAnimation(true);
});
</script>
</body>
</html>